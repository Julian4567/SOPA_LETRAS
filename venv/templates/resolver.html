socket.on('solve_result', (data) => {
  if (!data.ok) {
    log(data.msg || 'No hay solución');
    return;
  }

  const positions = data.positions;

  // limpiar colores anteriores
  document.querySelectorAll('td').forEach(td => {
    td.classList.remove('solution', 'color2', 'color3', 'color4', 'color5', 'color6');
  });

  // lista de clases de colores
  const colorClasses = [
    ["solution"],
    ["solution", "color2"],
    ["solution", "color3"],
    ["solution", "color4"],
    ["solution", "color5"],
    ["solution", "color6"]
  ];

  let colorIndex = 0;

  // aplicar un color distinto a cada palabra
  for (const [word, coords] of Object.entries(positions)) {
    const classesToApply = colorClasses[colorIndex % colorClasses.length];
    colorIndex++;

    coords.forEach(pair => {
      const r = pair[0], c = pair[1];
      const el = document.querySelector(`td[data-r="${r}"][data-c="${c}"]`);
      if (el) {
        // remover clases previas
        el.className = "";
        // aplicar las nuevas clases
        classesToApply.forEach(cls => el.classList.add(cls));
      }
    });
  }

  log('Solución mostrada con colores.');
  stopTimer();
});
